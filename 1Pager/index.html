<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Job Application Portal</title>

  <!-- SEO Meta Tags -->
  <meta name="description" content="Premium job application portal with modern design and seamless user experience">
  <meta name="theme-color" content="#ffffff">

  <!-- Preconnect to Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Main Stylesheet -->
  <link rel="stylesheet" href="css/main.css">
</head>

<body>
  <main>
    <div class="container">

      <!-- Hero Quote Section -->
      <div class="hero-quote">
        <h1>
          "There is no passion to be found playing small — in settling for a life that is less than the one you are
          capable of living."
        </h1>
        <p class="author">— Nelson Mandela</p>
      </div>

      <!-- Glass Card Form -->
      <div class="glass-card">
        <form id="job_opening" novalidate>

          <!-- Job URL -->
          <div class="input-wrapper">
            <input type="url" class="form-input" id="job_url" name="job_url" placeholder=" " required
              autocomplete="url">
            <label for="job_url" class="form-label">Job URL</label>
          </div>

          <!-- Company Name & Job Title Row -->
          <div class="form-row">
            <div class="input-wrapper">
              <input type="text" class="form-input" id="company_name" name="company_name" placeholder=" " required
                autocomplete="organization">
              <label for="company_name" class="form-label">Company Name</label>
            </div>

            <div class="input-wrapper">
              <input type="text" class="form-input" id="job_title" name="job_title" placeholder=" " required
                autocomplete="organization-title">
              <label for="job_title" class="form-label">Job Title</label>
            </div>
          </div>

          <!-- Job Description -->
          <div class="input-wrapper">
            <textarea class="form-textarea" id="job_description" name="job_description" placeholder=" " rows="4"
              required></textarea>
            <label for="job_description" class="form-label">Job Description</label>
          </div>

          <!-- Hiring Team -->
          <div class="input-wrapper">
            <input type="text" class="form-input" id="hiring_team" name="hiring_team" placeholder=" " required>
            <label for="hiring_team" class="form-label">Hiring Team</label>
          </div>

          <!-- Company Description -->
          <div class="input-wrapper">
            <textarea class="form-textarea" id="company_description" name="company_description" placeholder=" " rows="4"
              required></textarea>
            <label for="company_description" class="form-label">Company Description</label>
          </div>

          <!-- Submit Button & Status Indicators -->
          <div class="btn-container">
            <button type="submit" class="btn-primary" id="submit_btn">
              <span>Submit Application</span>
            </button>

            <!-- Loading Spinner -->
            <div class="spinner hidden" id="job_spin" role="status" aria-label="Loading"></div>

            <!-- Success Icon -->
            <div class="success-icon hidden" id="job_smile" aria-label="Success">
              <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" viewBox="0 0 16 16">
                <path
                  d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0M4.756 4.566c.763-1.424 4.02-.12.952 3.434-4.496-1.596-2.35-4.298-.952-3.434m6.559 5.448a.5.5 0 0 1 .548.736A4.5 4.5 0 0 1 7.965 13a4.5 4.5 0 0 1-3.898-2.25.5.5 0 0 1 .548-.736h.005l.017.005.067.015.252.055c.215.046.515.108.857.169.693.124 1.522.242 2.152.242s1.46-.118 2.152-.242a27 27 0 0 0 1.109-.224l.067-.015.017-.004.005-.002zm-.07-5.448c1.397-.864 3.543 1.838-.953 3.434-3.067-3.554.19-4.858.952-3.434z" />
              </svg>
            </div>
          </div>

        </form>
      </div>

    </div>
  </main>

  <script>
    // DOM Elements
    const form = document.querySelector("#job_opening");
    const submitBtn = document.querySelector("#submit_btn");
    const spinner = document.querySelector("#job_spin");
    const smile = document.querySelector("#job_smile");

    // Form Submission Handler
    async function sendData() {
      // Create FormData from form
      const formData = new FormData(form);

      try {
        // Hide success icon and show spinner
        smile.classList.remove("active");
        smile.classList.add("hidden");
        spinner.classList.remove("hidden");
        spinner.classList.add("active");
        submitBtn.disabled = true;

        // Send POST request
        const response = await fetch("https://mollusk-pleased-lemming.ngrok-free.app/webhook-test/jappmotlet", {
          method: "POST",
          body: formData,
        });

        const result = await response.json();
        console.log("Response:", result);

        // Hide spinner and show success icon
        spinner.classList.remove("active");
        spinner.classList.add("hidden");
        smile.classList.remove("hidden");
        smile.classList.add("active");

        // Reset form after 2 seconds
        setTimeout(() => {
          form.reset();
          smile.classList.remove("active");
          smile.classList.add("hidden");
          submitBtn.disabled = false;
        }, 2000);

      } catch (error) {
        console.error("Submission error:", error);

        // Hide spinner on error
        spinner.classList.remove("active");
        spinner.classList.add("hidden");
        submitBtn.disabled = false;

        // Show error feedback (you can customize this)
        alert("There was an error submitting your application. Please try again.");
      }
    }

    // Prevent default form submission and handle with custom function
    form.addEventListener("submit", (event) => {
      event.preventDefault();

      // Basic HTML5 validation check
      if (form.checkValidity()) {
        sendData();
      } else {
        // Trigger browser's built-in validation UI
        form.reportValidity();
      }
    });

    // Add smooth input interactions
    const inputs = document.querySelectorAll('.form-input, .form-textarea');
    inputs.forEach(input => {
      // Add focus animation
      input.addEventListener('focus', function () {
        this.parentElement.style.transform = 'translateY(-2px)';
      });

      input.addEventListener('blur', function () {
        this.parentElement.style.transform = 'translateY(0)';
      });
    });

    // Parallax effect on mouse move (subtle)
    document.addEventListener('mousemove', (e) => {
      const moveX = (e.clientX - window.innerWidth / 2) * 0.01;
      const moveY = (e.clientY - window.innerHeight / 2) * 0.01;

      const glassCard = document.querySelector('.glass-card');
      if (glassCard) {
        glassCard.style.transform = `perspective(1000px) rotateY(${moveX}deg) rotateX(${-moveY}deg)`;
      }
    });

    // Reset card position on mouse leave
    document.addEventListener('mouseleave', () => {
      const glassCard = document.querySelector('.glass-card');
      if (glassCard) {
        glassCard.style.transform = 'perspective(1000px) rotateY(0deg) rotateX(0deg)';
      }
    });
  </script>
</body>

</html>